<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Intro to D3</title>
  		<script type="text/javascript" src="./d3/d3.min.js"></script>
	</head>


	<body>
		<div id="title">
			<h1></h1>
  			<h2></h2>
  		</div>

  		<div class="container">
	    	<div id="chart"></div>
	 	</div>


		<script type="text/javascript">
			var svg_w = 960;
			var svg_h = 700;
			var margin = {top: 100, right: 75, bottom: 120, left: 50};
			var width = svg_w - margin.left - margin.right;
			var height = svg_h - margin.top - margin.bottom;

			//load, manipulate and sort dataset
			var dataset;
			d3.json("data.json", function(error, data) {
    			if (error) {console.log(error);}

    			data.forEach(function(d) {
    				d.Number = +d.Number; 
    				d.ID = +d.ID;
    			})

    			dataset = data;

    			dataset.sort(function(x, y) {
    				return d3.ascending(x.Number, y.Number);
    			})


			var svg = d3.select("#chart")
					    .append("svg")
					    .attr("width", svg_w)
					    .attr("height", svg_h)
					    
		    var g = svg.append("g")
				    	.attr("transform", "translate("+ margin.left + "," + margin.top*2 + ")");


    		var yScale = d3.scaleLinear()
							.domain(d3.extent(dataset, function(d) { return d.Number;}))
							.range([0,height])
							.nice();

			var xScale = d3.scaleBand()
							.domain(dataset.map(function (d) {return d.Geography;}))
							.range([0, width])
							.padding(0.1);

			g.append("g")
				.call(d3.axisTop(xScale));

			g.append("g")
				.call(d3.axisLeft(yScale));	


	    	g.selectAll(".bar")
		        .data(dataset) 
		        .enter()
		        .append("rect") 
		        .attr("x", function(d){ return xScale(d.Geography); })
		        .attr("y", 0)
		        .attr("width", xScale.bandwidth())
		        .attr("height", function(d){ return yScale(d.Number) })
		        .attr("fill", "teal");

			});

			

		</script>
	</body>
</html>